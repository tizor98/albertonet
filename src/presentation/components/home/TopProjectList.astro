---
import { getLangFromUrl, useTranslations } from "@/config/i18n/utils";
import { GITHUB_URL } from "@/consts";
import { GetTopProjects } from "@/core/usecases/GetTopProjects";
import ProjectCard from "../cross/ProjectCard.astro";
import Link from "../ui/Link.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang, "home");

const projects = await GetTopProjects();
---

<section
    id="top-project-list"
    class="container flex flex-col items-start gap-6 px-5 md:px-8"
>
    <h2 class="text-2xl md:text-3xl font-semibold tracking-tight adaptive-text">
        {t("topProjects")}
    </h2>
    <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5 w-full">
        {projects.map((project) => (
            <ProjectCard
                project={project}
            />
        ))}
    </div>
        <Link class="self-start ui-meta" href={GITHUB_URL}>
            <div class="flex items-center text-sm md:text-base gap-1">
                <span class="icon-[mdi--arrow-right-box]"></span>
                <p>{t("seeMore")}</p>
            </div>
        </Link>
</section>
