---
import { Image } from "astro:assets";
import { getLangFromUrl, useTranslations } from "@/config/i18n/utils";
import type { PostEntry } from "@/content.config";
import defaultBlogImage from "@/presentation/assets/blog-placeholder-1.png";
import BaseHead from "../components/nav/BaseHead.astro";
import FormattedDate from "../components/ui/FormattedDate.astro";
import Body from "./Body.astro";

type Props = PostEntry["data"];

const {
    title,
    description,
    pubDate,
    updatedDate,
    heroImage = defaultBlogImage,
} = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang, "blog");
---

<!doctype html>
<html lang={lang}>
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<Body>
		<section class="w-full flex flex-col items-center px-4 sm:px-6 py-6 sm:py-10">
			<div class="w-full max-w-3xl mx-auto ui-card">
				<Image transition:name={`img-${title}`} id={`img-${title}`} class="block w-full object-cover" width={1020} height={510} fit="cover" src={heroImage} alt="" />
			</div>
			<div class="w-full max-w-3xl mx-auto pt-8 sm:pt-10">
				<header class="text-center mb-8 sm:mb-10">
					<div class="ui-meta mb-2">
						<FormattedDate date={pubDate} />
						{
							updatedDate && (
								<span class="block sm:inline sm:ml-2 text-xs italic mt-1">
									{t("lastUpdated")} <FormattedDate date={updatedDate} />
								</span>
							)
						}
					</div>
					<h1 transition:name={`title-${title}`} id={`title-${title}`} class="text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight adaptive-text">
						{title}
					</h1>
					<hr class="mt-4 mx-auto w-16 h-px rounded" style="background-color: var(--border-default);" />
				</header>
				<article class="prose prose-custom prose-lg max-w-none">
					<slot />
				</article>
			</div>
		</section>
	</Body>
</html>
