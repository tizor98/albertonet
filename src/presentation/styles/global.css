@import "tailwindcss";

@plugin "@tailwindcss/typography";
@plugin "daisyui";
@plugin "@iconify/tailwind4";

@custom-variant dark (&:is(.dark *));

@layer base {
    :root {
        --bg-canvas: #f3f1ea;
        --bg-surface-1: #f8f6ef;
        --bg-surface-2: #ffffff;
        --bg-surface-inset: #ece8dc;
        --fg-primary: #111827;
        --fg-secondary: #374151;
        --fg-tertiary: #6b7280;
        --fg-muted: #9ca3af;
        --border-soft: rgb(17 24 39 / 12%);
        --border-default: rgb(17 24 39 / 20%);
        --border-strong: rgb(17 24 39 / 34%);
        --accent-brand: #1d4ed8;
        --accent-warm: #b45309;
        --state-success: #15803d;
        --state-warning: #b45309;
        --state-danger: #b91c1c;
        --focus-ring: rgb(29 78 216 / 45%);
        --chip-bg: #fff4da;
        --chip-text: #7c2d12;
        --radius-control: 0.5rem;
        --radius-surface: 0.875rem;
        --font-mono:
            "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, Consolas,
            "Liberation Mono", "Courier New", monospace;
    }

    .dark {
        --bg-canvas: #0d1117;
        --bg-surface-1: #141a22;
        --bg-surface-2: #1a2430;
        --bg-surface-inset: #0f1620;
        --fg-primary: #e5e7eb;
        --fg-secondary: #cbd5e1;
        --fg-tertiary: #94a3b8;
        --fg-muted: #64748b;
        --border-soft: rgb(203 213 225 / 18%);
        --border-default: rgb(203 213 225 / 28%);
        --border-strong: rgb(203 213 225 / 42%);
        --accent-brand: #60a5fa;
        --accent-warm: #f59e0b;
        --state-success: #4ade80;
        --state-warning: #fbbf24;
        --state-danger: #f87171;
        --focus-ring: rgb(96 165 250 / 50%);
        --chip-bg: #3f2f04;
        --chip-text: #fde68a;
    }

    html,
    body {
        background-color: var(--bg-canvas);
        color: var(--fg-primary);
    }

    body {
        color: var(--fg-primary);
        font-feature-settings:
            "liga" 1,
            "calt" 1;
    }

    .adaptive-text {
        color: var(--fg-primary);
    }

    a.active {
        color: var(--accent-brand);
        text-decoration: underline;
        text-underline-offset: 0.325rem;
    }

    .custom-input {
        @apply flex h-10 w-full rounded-md px-3 py-2 text-base transition-colors duration-150 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm;
        border: 1px solid var(--border-default);
        background-color: var(--bg-surface-inset);
        color: var(--fg-primary);
    }

    .custom-input::placeholder {
        color: var(--fg-tertiary);
    }

    .custom-input:focus-visible {
        outline: 2px solid var(--focus-ring);
        outline-offset: 1px;
    }

    .custom-text-area {
        @apply flex min-h-[120px] w-full rounded-md px-3 py-2 text-base transition-colors duration-150 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm;
        border: 1px solid var(--border-default);
        background-color: var(--bg-surface-inset);
        color: var(--fg-primary);
    }

    .custom-text-area::placeholder {
        color: var(--fg-tertiary);
    }

    .custom-text-area:focus-visible {
        outline: 2px solid var(--focus-ring);
        outline-offset: 1px;
    }

    .custom-label {
        @apply text-sm font-medium leading-none;
        color: var(--fg-secondary);
    }

    .custom-input-error,
    .custom-text-area-error {
        border-color: var(--state-danger);
    }

    .custom-field-error {
        @apply hidden text-xs tracking-tight;
        color: var(--state-danger);
    }

    .custom-field-error[data-visible="true"] {
        @apply block;
    }
}

@layer components {
    .ui-page-shell {
        background-color: var(--bg-canvas);
        color: var(--fg-primary);
    }

    .ui-surface {
        background-color: var(--bg-surface-1);
        border: 1px solid var(--border-soft);
    }

    .ui-card {
        background-color: var(--bg-surface-2);
        border: 1px solid var(--border-default);
        border-radius: var(--radius-surface);
        overflow: hidden;
    }

    .ui-card-hover {
        transition:
            border-color 0.18s ease,
            background-color 0.18s ease;
    }

    .ui-card-hover:hover {
        border-color: var(--border-strong);
        background-color: var(--bg-surface-1);
    }

    .ui-meta {
        color: var(--fg-tertiary);
        font-family: var(--font-mono);
        font-size: 0.8125rem;
        font-variant-numeric: tabular-nums;
        letter-spacing: 0.01em;
    }

    .ui-muted {
        color: var(--fg-secondary);
    }

    .ui-chip {
        border: 1px solid var(--border-soft);
        background-color: var(--chip-bg);
        color: var(--chip-text);
        border-radius: 9999px;
        font-size: 0.75rem;
        line-height: 1;
        padding: 0.375rem 0.625rem;
    }

    .ui-link-inline {
        color: var(--fg-primary);
        text-underline-offset: 0.35rem;
        transition: color 0.15s ease;
    }

    .ui-link-inline:hover {
        color: var(--accent-brand);
        text-decoration: underline;
    }

    .ui-control {
        @apply inline-flex items-center justify-center;
        min-height: 2.35rem;
        min-width: 2.35rem;
        border: 1px solid var(--border-default);
        border-radius: 0.75rem;
        background-color: var(--bg-surface-2);
        color: var(--fg-primary);
        transition:
            background-color 0.15s ease,
            border-color 0.15s ease;
    }

    .ui-control:hover {
        border-color: var(--border-strong);
        background-color: var(--bg-surface-1);
    }

    .ui-dropdown-panel {
        border: 1px solid var(--border-default);
        border-radius: 0.75rem;
        background-color: var(--bg-surface-2);
        color: var(--fg-primary);
    }

    .ui-dropdown-panel :is(a, button) {
        border-radius: 0.5rem;
    }

    .ui-dropdown-panel :is(a, button):hover {
        background-color: var(--bg-surface-1);
    }

    .ui-btn-base {
        @apply inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50;
        border-radius: var(--radius-control);
        min-height: 2.5rem;
        padding: 0.5rem 1rem;
    }

    .ui-btn-base:focus-visible {
        outline: 2px solid var(--focus-ring);
        outline-offset: 2px;
    }

    .ui-btn-primary {
        border: 1px solid transparent;
        background-color: var(--fg-primary);
        color: var(--bg-surface-2);
    }

    .ui-btn-primary:hover {
        opacity: 0.9;
    }

    .ui-btn-secondary {
        border: 1px solid var(--border-default);
        background-color: var(--bg-surface-2);
        color: var(--fg-primary);
    }

    .ui-btn-secondary:hover {
        border-color: var(--border-strong);
        background-color: var(--bg-surface-1);
    }

    .ui-status-badge {
        @apply inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs;
        border: 1px solid var(--border-soft);
        font-family: var(--font-mono);
    }

    .ui-status-success {
        color: var(--state-success);
    }

    .ui-status-warning {
        color: var(--state-warning);
    }
}

@layer utilities {
    .prose-custom {
        @apply text-slate-700;
    }

    .prose-custom :is(h1, h2, h3, h4, h5, h6) {
        @apply text-slate-900;
    }

    .prose-custom .lead {
        @apply text-slate-600;
    }

    .prose-custom a {
        color: var(--accent-brand);
        text-underline-offset: 0.25rem;
    }

    .prose-custom strong,
    .prose-custom b {
        @apply text-slate-900;
    }

    .prose-custom ol {
        @apply marker:text-slate-500;
    }

    .prose-custom ul {
        @apply marker:text-slate-300;
    }

    .prose-custom hr {
        @apply border-slate-200;
    }

    .prose-custom blockquote {
        @apply text-slate-900 border-slate-200;
    }

    .prose-custom figcaption {
        @apply text-slate-500;
    }

    .prose-custom kbd {
        @apply text-slate-900;
    }

    .prose-custom code {
        @apply text-slate-900;
    }

    .prose-custom pre {
        @apply text-slate-200 bg-slate-800;
    }

    .prose-custom th {
        @apply border-slate-600 bg-slate-200 text-black;
    }

    .prose-custom td {
        @apply border-slate-600;
    }

    /* Dark / invert variants: apply utilities under .dark scope */
    .dark .prose-custom {
        @apply text-slate-300;
    }

    .dark .prose-custom :is(h1, h2, h3, h4, h5, h6) {
        @apply text-white;
    }

    .dark .prose-custom .lead {
        @apply text-slate-400;
    }

    .dark .prose-custom a {
        color: var(--accent-brand);
    }

    .dark .prose-custom strong,
    .dark .prose-custom b {
        @apply text-white;
    }

    .dark .prose-custom ol {
        @apply marker:text-slate-400;
    }

    .dark .prose-custom ul {
        @apply marker:text-slate-600;
    }

    .dark .prose-custom hr {
        @apply border-slate-700;
    }

    .dark .prose-custom blockquote {
        @apply text-slate-100 border-slate-700;
    }

    .dark .prose-custom figcaption {
        @apply text-slate-400;
    }

    .dark .prose-custom kbd {
        @apply text-white;
    }

    .dark .prose-custom code {
        @apply text-slate-100;
    }

    .dark .prose-custom pre {
        @apply text-slate-300;
        background-color: rgb(0 0 0 / 50%);
    }

    .dark .prose-custom th {
        @apply border-slate-600;
    }

    .dark .prose-custom td {
        @apply border-slate-700;
    }
}
